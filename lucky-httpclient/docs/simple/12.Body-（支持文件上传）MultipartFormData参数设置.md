## 🗃️ `multipart/form-data`参数设置

---
`multipart/form-data` 是一种编码类型，用于通过 HTTP 请求上传文件和数据。当用户通过 HTML 表单提交数据时，尤其是包含文件上传的表单，`multipart/form-data` 就是常用的编码格式。

### 用途
`multipart/form-data` 主要用于允许用户通过 Web 表单上传文件。它将表单数据分成多个部分，每部分可以包含一个字段或一个文件，最终这些部分组合成一个完整的请求体。这种格式可以传递二进制文件以及其他类型的数据（如文本字段）。

### 工作原理
当浏览器通过 POST 请求发送表单时，表单中的每个字段都包含在一个多部分的内容中，每个部分的内容通过一个边界（boundary）分隔开来。boundary 是一种特殊的标记符，确保每个字段的边界和内容是独立的。

### 请求格式
在 `multipart/form-data` 请求中，数据按以下格式分成多个部分（每部分前后都有边界标识符）：

- 每部分的 Content-Disposition 表示该部分的内容（字段名或文件名）。
- 如果是文件部分，Content-Type 表示文件的 MIME 类型。
- 每部分之间用一个唯一的 boundary 进行分隔。

### 示例 HTTP 请求（请求体）
假设我们要提交一个文件和一个文本字段，表单数据可能如下：
```http request
POST /upload HTTP/1.1
Host: example.com
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Length: 475

------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="username"

john_doe
------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="file1"; filename="example.txt"
Content-Type: text/plain

[文件内容]
------WebKitFormBoundary7MA4YWxkTrZu0gW--
```

---
### #使用`@MultiData` + `@MultiFile`来进行参数设置

- `@MultiData`: 用于标识一个文本参数
- `@MultiFile`: 用来标识一个文件参数 

`@MultiFile`注解支持的参数类型如下：  
1. **无需设置文件名的类型，如果是如下类型`fileName`属性将会失效**  
- `File`、`File[]`、`Collection<File>`
- `Resource`、`Resource[]`、`Collection<Resource>`
- `MultipartFile`、`MultipartFile[]`、`Collection<MultipartFile>`
- `HttpFile`、`HttpFile[]`、`Collection<HttpFile>`
- `String`、`String[]`、`Collection<String>`类型的资源定位符号，参照`ResourceLoader#getResource(String)`  
  例如：
  - http://www.baidu.com/img/bd_logo1.png
  - file:D:/test/test.txt
  - classpath:file/*.pdf
  
2. **必须设置文件名的类型，如果没有设置`fileName`属性将抛出异常**
- `byte[]`以及他的`数组`和`集合类型`
- `Byte[]`以及他的`数组`和`集合类型`
- `InputStream`以及他的`数组`和`集合类型`  
注:
  
在使用以上类型的数组或者集合时`fileName`属性中可以使用占位符`{_index_}`，  
实际生成的文件名中会被替换为数组或者集合的下标。  


具体使用的实例代码如下：  

1. 【纯文本的表单】

```java
import com.luckyframework.httpclient.proxy.annotations.NotHttpParam;

/*
    【纯文本的表单】
    text("Jack", 18, "jack@gmail.com")  
    
    -->
    
    POST http://localhost:8080/lucky/hello
    User-Agent: Lucky-HttpClient/3.0.1 (Java/1.8.0_432)
    Content-Type: multipart/form-data; boundary=LuckyBoundary

    --LuckyBoundary
    Content-Disposition: form-data; name="name"
    Content-Type: text/plain

    Jack
    --LuckyBoundary
    Content-Disposition: form-data; name="age"
    Content-Type: text/plain

    18
    --LuckyBoundary
    Content-Disposition: form-data; name="email"
    Content-Type: text/plain

    jack@gmail.com
    --LuckyBoundary--
      
 */
@Post("http://localhost:8080/multipartFormData")
String text(@MultiData String name, @MultiData Integer age, @MultiData String email);

// 上述接口的简化写法
@MultiData
@Post("http://localhost:8080/multipartFormData")
String text(String name, Integer age, String email, @NotHttpParam String notMultiDataParam);
```