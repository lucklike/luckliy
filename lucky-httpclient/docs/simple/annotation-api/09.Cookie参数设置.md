## ğŸª Cookieå‚æ•°è®¾ç½®

---

`Cookie`æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªåç§°ä¸º`Cookie`çš„è¯·æ±‚å¤´ï¼Œå€¼ä¸ºä¸€ç³»åˆ—çš„key-valueé”®å€¼å¯¹ï¼Œå¤šä¸ªé”®å€¼å¯¹ä¹‹é—´ä½¿ç”¨`;`åˆ†éš”  
ä¾‹å¦‚ï¼š`Cookie: name=Jack; age=18; sex=ç”·`

---
### #ä½¿ç”¨`@CookieParam`æ³¨è§£æ¥è®¾ç½®

```java
/*
    cookieTest("Jack", 18, "ç”·");
    
     -->
     
    GET http://localhost:8080/cookie
    User-Agent: Lucky-HttpClient/3.0.1 (Java/1.8.0_432)
    Cookie: name=Jack; age=18; sex=ç”·
 */
@Get("http://localhost:8080/cookie")
String cookieTest(@CookieParam String name, @CookieParam Integer age, @CookieParam String sex);


/*
    å½“æ–¹æ³•å‚æ•°åˆ—è¡¨å¤§éƒ¨åˆ†éƒ½æ˜¯Cookieå‚æ•°æ—¶ï¼Œå¯ä»¥å°†@CookieParamæ³¨è§£æåˆ°æ–¹æ³•ä¸Š, å¦‚æœæŸä¸ªå‚æ•°ä¸æ˜¯Cookieå‚æ•°ï¼Œå¯ä»¥ä½¿ç”¨@NotHttpParamæ¥æ’é™¤
    cookieTest2("Jack", 18, "ç”·", "ä¸æ˜¯Cookieå‚æ•°");
    
     -->
     
    GET http://localhost:8080/cookie
    User-Agent: Lucky-HttpClient/3.0.1 (Java/1.8.0_432)
    Cookie: name=Jack; age=18; sex=ç”·
 */
@CookieParam
@Get("http://localhost:8080/cookie")
String cookieTest2(String name, Integer age, String sex, @NotHttpParam String notCookieParam);


// å¯ä»¥ä½¿ç”¨Mapæ¥æ‰¹é‡æ·»åŠ Cookieå‚æ•°  
@Get("http://localhost:8080/cookie")
String cookieTest3(@CookieParam Map<String, Object> mapCookie);


// å½“ç„¶ï¼Œå¯ä»¥ä½¿ç”¨å¯¹è±¡æ¥æ‰¹é‡æ·»åŠ Cookieå‚æ•°    
@Get("http://localhost:8080/cookie")
String cookieTest4(@CookieParam CookieEntity objectCookie);
```

---
### #ä½¿ç”¨`@StaticCookie`æ³¨è§£æ¥è®¾ç½®

1. **ç®€å•ä½¿ç”¨**
```java
@StaticCookie({
    "name=#{p0}",                // ä½¿ç”¨ç´¢å¼•çš„æ–¹å¼å–å‚æ•°åˆ—è¡¨ä¸­çš„å€¼
    "age=#{age}",                // ä½¿ç”¨å‚æ•°åçš„æ–¹å¼å–å‚æ•°åˆ—è¡¨ä¸­çš„å€¼
    "email=#{email}",            // ä½¿ç”¨å‚æ•°åçš„æ–¹å¼å–å‚æ•°åˆ—è¡¨ä¸­çš„å€¼
    "test=Test-Form",            // å›ºå®šCookieå‚æ•°
    "time=#{#time()}",           // æ‰§è¡ŒSpELå‡½æ•°
    "apiKey=${local.api.apiKey}" // å–ç¯å¢ƒå˜é‡ä¸­çš„é…ç½®
})
@Get("http://localhost:8080/cookie")
String cookieTest5(String name, Integer age, String email);
```

2. **ä½¿ç”¨`@StaticCookie`æ³¨è§£çš„`æ¡ä»¶è¡¨è¾¾å¼`æ¥å®Œæˆç‰¹å®šæ¡ä»¶ä¸‹çš„Cookieå‚æ•°è®¾ç½®**

- `condition`å±æ€§æ¥æ§åˆ¶`ä¸€æ‰¹Cookie`å‚æ•°çš„è®¾ä¸å¦

```java
/*
    1. TIMEå±æ€§ä¼šè¢«æ— æ¡ä»¶çš„åŠ å…¥åˆ°Cookieå‚æ•°ä¸­
    2. åªæœ‰å½“`condition`å±æ€§ç½®é¡¶çš„æ¡ä»¶è¡¨è¾¾å¼`#{userInfo != null}` æˆç«‹æ—¶
        X-IDã€X-NAMEã€X-AGEæ‰ä¼šè¢«è®¾ç½®åˆ°Cookieå‚æ•°ä¸­
 */
@StaticCookie({
    "TIME=#{#time}"    
})
@StaticCookie(
    condition = "#{userInfo != null}",
    value = {
        "X-ID=#{userInfo.id}",
        "X-NAME=#{userInfo.userName}",
        "X-AGE=#{userInfo.age}",
    }   
)
@Get("/getOne)
User getUser(User userInfo);
```

- ä½¿ç”¨`@if`è¡¨è¾¾å¼æ¥æ§åˆ¶å•ä¸ªCookieå‚æ•°
> è¯­æ³•ä¸ºï¼š`@if(expression): key=value`

```java
/*
    å½“#{#nonNull(userInfo?.id)}è¡¨è¾¾å¼ç»“æœä¸ºtrueæ—¶ï¼ŒX-ID=#{userInfo.id} æ‰ä¼šè¢«è®¾ç½®ä¸ºCookieå‚æ•°
 */
@StaticCookie({
    "TIME=#{#time()}",
    "@if(#{#nonNull(userInfo?.id)}): X-ID=#{userInfo.id}",    
})
@Get("/getOne)
User getUser(User userInfo);
```