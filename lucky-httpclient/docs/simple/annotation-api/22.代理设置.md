## ğŸ¤‘ä»£ç†ï¼ˆProxyï¼‰è®¾ç½®

åœ¨`HTTP` åè®®ä¸­ï¼Œä»£ç†`ï¼ˆProxyï¼‰` æ˜¯æŒ‡ä¸€ä¸ªä¸­é—´æœåŠ¡å™¨ï¼Œå®ƒä½äºå®¢æˆ·ç«¯å’Œç›®æ ‡æœåŠ¡å™¨ä¹‹é—´ï¼Œå……å½“å®¢æˆ·ç«¯çš„ä»£è¡¨æ¥è½¬å‘è¯·æ±‚å¹¶è¿”å›å“åº”ã€‚ä»£ç†æœåŠ¡å™¨å¯ä»¥æä¾›å¤šç§åŠŸèƒ½ï¼Œå¦‚åŒ¿åæ€§ã€è®¿é—®æ§åˆ¶ã€å†…å®¹ç¼“å­˜ã€è´Ÿè½½å‡è¡¡ç­‰ã€‚
### **HTTP ä»£ç†çš„å¸¸è§ç”¨é€”**
**æé«˜éšç§å’ŒåŒ¿åæ€§**ï¼š ä»£ç†æœåŠ¡å™¨å¯ä»¥éšè—å®¢æˆ·ç«¯çš„çœŸå® IP åœ°å€ï¼Œä»è€Œæä¾›åŒ¿åæ€§ã€‚è¿™å¯¹äºä¿æŠ¤ç”¨æˆ·éšç§è‡³å…³é‡è¦ï¼Œå°¤å…¶æ˜¯åœ¨è®¿é—®æ•æ„Ÿå†…å®¹æ—¶ã€‚

**ç»•è¿‡åœ°ç†é™åˆ¶**ï¼š åœ¨æŸäº›åœ°åŒºï¼Œç‰¹å®šçš„ç½‘ç»œèµ„æºæˆ–ç½‘ç«™è¢«å°é”æˆ–é™åˆ¶ã€‚é€šè¿‡ä½¿ç”¨ä»£ç†æœåŠ¡å™¨ï¼Œç”¨æˆ·å¯ä»¥è®¿é—®è¿™äº›å—é™çš„èµ„æºã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨ç¾å›½çš„ä»£ç†æœåŠ¡å™¨ç»•è¿‡åœ°åŸŸé™åˆ¶è®¿é—® `Netflix` æˆ– `YouTube`ã€‚

**ç¼“å­˜å’ŒåŠ é€Ÿ**ï¼š ä»£ç†æœåŠ¡å™¨å¯ä»¥ç¼“å­˜æ¥è‡ªç›®æ ‡æœåŠ¡å™¨çš„å“åº”æ•°æ®ï¼Œä»è€Œå‡å°‘å¯¹ç›®æ ‡æœåŠ¡å™¨çš„è¯·æ±‚æ¬¡æ•°ï¼Œæå‡è®¿é—®é€Ÿåº¦ï¼Œå¹¶å‡å°‘å¸¦å®½ä½¿ç”¨ã€‚

**è´Ÿè½½å‡è¡¡**ï¼š åœ¨ä¼ä¸šç¯å¢ƒä¸­ï¼Œåå‘ä»£ç†æœåŠ¡å™¨é€šå¸¸ä½œä¸ºè´Ÿè½½å‡è¡¡å™¨ä½¿ç”¨ï¼Œå°†æµé‡åˆ†å‘åˆ°å¤šä¸ªåç«¯æœåŠ¡å™¨ä¸Šï¼Œä»¥æé«˜ç½‘ç«™æˆ–åº”ç”¨çš„å¯ç”¨æ€§å’Œå“åº”é€Ÿåº¦ã€‚

**å†…å®¹è¿‡æ»¤**ï¼š ä¼ä¸šå’Œå­¦æ ¡ç½‘ç»œå¸¸ä½¿ç”¨ä»£ç†æ¥è¿›è¡Œå†…å®¹è¿‡æ»¤ï¼Œé™åˆ¶ç”¨æˆ·è®¿é—®ä¸è‰¯æˆ–ä¸ç›¸å…³çš„ç½‘ç«™ã€‚é€æ˜ä»£ç†ç»å¸¸ç”¨äºè¿™ç§åœºæ™¯ã€‚

**åŠ å¯†å’Œè§£å¯†ï¼ˆSSL ç»ˆæ­¢ï¼‰**ï¼š åå‘ä»£ç†é€šå¸¸ç”¨äºå¤„ç† HTTPS è¯·æ±‚çš„ SSL ç»ˆæ­¢ã€‚é€šè¿‡ä»£ç†æœåŠ¡å™¨å¤„ç† SSL æ¡æ‰‹å’ŒåŠ å¯†è§£å¯†æ“ä½œï¼Œå‡è½»åç«¯æœåŠ¡å™¨çš„è´Ÿæ‹…

---

### #ä½¿ç”¨`@HttpProxy`æ³¨è§£æ¥è®¾ç½®`HTTPä»£ç†`

> æ³¨ï¼š å°†`@HttpProxy`æ³¨è§£æ ‡æ³¨åœ¨ç±»ä¸Šæ—¶ï¼Œç±»ä¸­çš„æ‰€æœ‰æ–¹æ³•å‡ä¼šèµ°`HTTP`ä»£ç†

```java
@DomainName("${local.api.url}")
public interface HttpProxyDemoApi {

    /*
         host: ä»£ç†æœåŠ¡å™¨ä¸»æœºåœ°å€
         port: ä»£ç†æœåŠ¡å™¨ç«¯å£å·
         username:ä»£ç†æœåŠ¡éªŒè¯çš„ç”¨æˆ·å(éå¿…å¡«)
         password: ä»£ç†æœåŠ¡éªŒè¯çš„å¯†ç (éå¿…å¡«)
     */
    
    /*
        å›ºå®šé…ç½®
        
        httpProxy();    
        
        -->
        
        GET http://localhost:8080/proxy/http
        Proxy: HTTP @ /192.168.0.111:8080
        User-Agent: Lucky-HttpClient/3.0.1 (Java/1.8.0_432)
     */
    @HttpProxy(host = "192.168.0.111", port = "8080", username = "You User Name", password = "You Password")
    @Get("/proxy/http")
    String httpProxy();


    // ä»ç¯å¢ƒå˜é‡ä¸­å–é…ç½®å€¼
    @HttpProxy(
        host = "${local.proxy.http.host}", 
        port = "${local.proxy.http.port}", 
        username = "${local.proxy.http.username}", 
        password = "${local.proxy.http.password}"
    )
    @Get("/proxy/http")
    String httpProxy();


    // SpELè¡¨è¾¾å¼
    @HttpProxy(
        host = "#{p0}",
        port = "#{port}",
        username = "${local.proxy.http.username}",
        password = "${local.proxy.http.password}"
    )
    @Get("/proxy/http")
    String httpProxy(String host, int port);
}
```

---
### #ä½¿ç”¨`@SocksProxy`æ³¨è§£æ¥è®¾ç½®`Socks`ä»£ç†

> æ³¨ï¼š å°†`@SocksProxy`æ³¨è§£æ ‡æ³¨åœ¨ç±»ä¸Šæ—¶ï¼Œç±»ä¸­çš„æ‰€æœ‰æ–¹æ³•å‡ä¼šèµ°`SOCKS`ä»£ç†

```java
@DomainName("http://localhost:8080")
public interface SocksProxyDemoApi {
    
    /*
     host: ä»£ç†æœåŠ¡å™¨ä¸»æœºåœ°å€
     port: ä»£ç†æœåŠ¡å™¨ç«¯å£å·
     username:ä»£ç†æœåŠ¡éªŒè¯çš„ç”¨æˆ·å(éå¿…å¡«)
     password: ä»£ç†æœåŠ¡éªŒè¯çš„å¯†ç (éå¿…å¡«)
    */

    /*
       å›ºå®šé…ç½® 
        socksProxy();
    
        -->
        
        GET http://localhost:8080/proxy/socks
        Proxy: SOCKS @ /118.25.42.139:8882
        User-Agent: Lucky-HttpClient/3.0.1 (Java/1.8.0_301)    
     */
    @SocksProxy(host = "192.168.42.139", port = "8888", username = "You User Name", password = "You Password")
    @Get("/proxy/socks")
    String socksProxy();

    // è¯»å–ç¯å¢ƒå˜é‡ä¸­çš„é…ç½®
    @SocksProxy(
        host = "${local.proxy.socks.host}", 
        port = "${local.proxy.socks.port}", 
        username = "${local.proxy.socks.username}", 
        password = "${local.proxy.socks.password}"
    )
    @Get("/proxy/socks")
    String socksProxy1();

    // æ”¯æŒä½¿ç”¨SpELè¡¨è¾¾å¼
    @SocksProxy(
        host = "${local.proxy.socks.host}",
        port = "${local.proxy.socks.port}",
        username = "#{p0}",
        password = "#{password}"
    )
    @Get("/proxy/socks")
    String socksProxy1(String username, String password);
}
```
