## ğŸ¯ [Response](../../../src/main/java/com/luckyframework/httpclient/core/meta/Response.java)å¯¹è±¡

`Response`å¯¹è±¡æ˜¯`lucky-httpclient`ä¸­æ ¸å¿ƒAPIä¹‹ä¸€ï¼Œè¯¥å¯¹è±¡å°è£…äº†HTTPå“åº”ç»“æœï¼ŒåŒ…æ‹¬ï¼š`çŠ¶æ€ç `ã€`å“åº”å¤´`ã€`å“åº”ä½“`ä»¥åŠ`å“åº”è½¬æ¢`
ç›¸å…³çš„æ–¹æ³•ç­‰ã€‚

---

### # é‡è¦APIä»‹ç»

- [Response](../../../src/main/java/com/luckyframework/httpclient/core/meta/Response.java)

| æ–¹æ³•                                             | è¯´æ˜                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
|------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `Request getRequest()`                         | è·å–å½“å‰è¯·æ±‚å¯¹è±¡                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| `int getStatus()`                              | è·å–çŠ¶æ€ç                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| `HttpHeaderManager getHeaderManager()`         | è·å–å“åº”å¤´ç®¡ç†å™¨ï¼Œä½¿ç”¨[HttpHeaderManager](../../../src/main/java/com/luckyframework/httpclient/core/meta/HttpHeaderManager.java)å¯¹è±¡å¯ä»¥è·å–å“åº”å¤´ä¿¡æ¯                                                                                                                                                                                                                                                                                                                                                                                                                               |
| `List<ClientCookie> getResponseCookies()`      | è·å–æ‰€æœ‰æœåŠ¡ç«¯å“åº”çš„Cookieä¿¡æ¯                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| `String getStringResult() `                    | è·å–`String`ç±»å‹çš„å“åº”ä½“ä¿¡æ¯                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| `String getStringResult(Charset)`              | ä½¿ç”¨`æŒ‡å®šç¼–ç `è·å–`String`ç±»å‹çš„å“åº”ä¿¡æ¯                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| `byte[] getResult()  `                         | è·å–`byte[]`ç±»å‹å“åº”ä¿¡æ¯                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| `InputStream getInputStream()`                 | è·å–`InputStream`ç±»å‹çš„å“åº”ä¿¡æ¯ï¼ˆæµåœ¨ä½¿ç”¨å®Œæ¯•ä¹‹åéœ€è¦æ‰‹åŠ¨å…³é—­ï¼‰                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| `MultipartFile getMultipartFile()`             | è·å–`MultipartFile`ç±»å‹çš„å“åº”ä¿¡æ¯                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| `<T> T getEntity(Type)`                        | **è‡ªåŠ¨å°†å“åº”çš„æ•°æ®è½¬åŒ–ä¸ºå®ä½“ç±»ï¼Œè½¬æ¢é€»è¾‘ï¼ˆé¡ºåºï¼‰å¦‚ä¸‹**:<br/><br/> **ä¸€.å›ºå®šè½¬æ¢é€»è¾‘ï¼Œå¦‚æœæ˜¯ä»¥ä¸‹ç±»å‹åˆ™ä½¿ç”¨å›ºå®šçš„è½¬æ¢é€»è¾‘**<br/> 1. `void`/`Void` <br/> 2. `Response` <br/>3. `HeaderMataData`/`ResponseMetaData`<br/>4. `MultipartFile`<br/>5. `InputStream` <br/> 6. `InputStreamSource`<br/>7. `byte[]`/`ByteArrayInputStream`<br/> 8. `String`<br/><br/> **äºŒ.ä½¿ç”¨æ³¨å†Œçš„`AutoConvert`è¿›è¡Œè½¬æ¢**<br/><br/>**ä¸‰.æ ¹æ®`Content-Type`è¿›è¡Œè‡ªåŠ¨ç±»å‹è½¬æ¢ï¼Œç›®å‰ä¹‹å‰çš„ç±»å‹å¦‚ä¸‹ï¼š**<br/>1. `application/json`: ä½¿ç”¨`Jackson`å°†å“åº”ä½“è½¬ä¸ºå¯¹è±¡<br/> 2. `application/xml`: ä½¿ç”¨`JAXB`å°†å“åº”ä½“è½¬ä¸ºå¯¹è±¡<br/> 3. `application/x-java-serialized-object`: å°†ä½¿ç”¨Javaåºåˆ—åŒ–åçš„å“åº”ä½“ååºåˆ—åŒ–ä¸ºJavaå¯¹è±¡ |
| `static void addAutoConvert(AutoConvert)`      | `é™æ€æ–¹æ³•`æ·»åŠ ä¸€ä¸ªç»“æœè‡ªåŠ¨è½¬æ¢å™¨                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| `static void addAutoConvert(int, AutoConvert)` | `é™æ€æ–¹æ³•`å‘è‡ªå®šç´¢å¼•ä½ç½®æ·»åŠ ä¸€ä¸ªç»“æœè‡ªåŠ¨è½¬æ¢å™¨                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |

- ç¤ºä¾‹ä»£ç 


```java

@DomainName("http://localhost")
public interface ResponseApi {

    @Get("/response/test")
    Response response();
}
```

> è·å–`è¯·æ±‚å®ä¾‹`ã€`çŠ¶æ€ç `ã€`Content-Type`ã€`å“åº”å¤´`ã€`Cookie`ã€`å“åº”ä½“è½¬æ¢`ç­‰ç¤ºä¾‹ä»£ç :
```java

@SpringBootTest
class ResponseApiTest {

    @Resource
    private ResponseApi api;

    @Test
    void response() {
        Response response = api.response();


        /*-----------------------è·å–è¯·æ±‚å®ä¾‹------------------------------*/
        Request request = response.getRequest();

        /*-----------------------è·å–çŠ¶æ€ç ------------------------------*/
        int status = response.getStatus();

        /*-----------------------è·å–Content-Typeä¿¡æ¯------------------------------*/
        ContentType contentType = response.getContentType();
        String mimeType = contentType.getMimeType();
        Charset charset = contentType.getCharset();

        /*-----------------------è·å–å“åº”å¤´ä¿¡æ¯------------------------------*/
        HttpHeaderManager headerManager = response.getHeaderManager();
        Header header = headerManager.getFirstHeader("X-RESPONSE-DATA");
        // è·å–æ•´ä½“å€¼
        Object headerValue = header.getValue();
        // è·å–å†…éƒ¨æŸä¸ªå˜é‡å€¼
        String inameValue = header.getInternalValue("iname");

        /*-----------------------è·å–Cookieä¿¡æ¯------------------------------*/
        List<ClientCookie> cookieList = response.getResponseCookies();
        for (ClientCookie clientCookie : cookieList) {
            // è·å–Cookie çš„é”®å€¼å¯¹
            String name = clientCookie.getName();
            String value = clientCookie.getValue();

            // è·å–å…¶ä»–ä¿¡æ¯
            String comment = clientCookie.getComment();
            // é€‚ç”¨çš„åŸŸå
            String domain = clientCookie.getDomain();
            // é€‚ç”¨çš„ URL è·¯å¾„
            String path = clientCookie.getPath();
            // ç‰ˆæœ¬å·
            int version = clientCookie.getVersion();
            // åˆ›å»ºæ—¶é—´
            Date createTime = clientCookie.getCreateTime();
            // ç»å¯¹è¿‡æœŸæ—¶é—´ï¼ˆGMTï¼‰
            Date expireTime = clientCookie.getExpireTime();
            // ç›¸å¯¹è¿‡æœŸæ—¶é—´ï¼ˆç§’ï¼‰
            int maxAge = clientCookie.getMaxAge();
            // æ˜¯å¦å·²ç»è¿‡æœŸ
            boolean expired = clientCookie.isExpired();
            // æ˜¯å¦ä»…HTTPSä¼ è¾“
            boolean secure = clientCookie.isSecure();
            // æ§åˆ¶è·¨ç«™è¯·æ±‚è¡Œä¸ºï¼ˆCSRF é˜²æŠ¤ï¼‰
            String sameSite = clientCookie.getSameSite();
            // æ˜¯å¦åªè¯»
            boolean httpOnly = clientCookie.isHttpOnly();
        }

        /*-----------------------è·å–å“åº”ä½“ä¿¡æ¯------------------------------*/
        // è·å–Stringæ ¼å¼çš„å“åº”ä½“
        String stringResult = response.getStringResult();
        // è·å–UTF8æ ¼å¼çš„Stringå“åº”ä½“
        String stringResultUtf8 = response.getStringResult(StandardCharsets.UTF_8);
        // è·å–byte[]æ ¼å¼çš„å“åº”ä½“
        byte[] bytes = response.getResult();
        // è·å–InputStreamæ ¼å¼çš„å“åº”ä½“
        InputStream inputStream = response.getInputStream();
        // è·å–MultipartFileæ ¼å¼çš„å“åº”ä½“
        MultipartFile multipartFile = response.getMultipartFile();
        // å°†å“åº”ä½“è½¬ä¸ºUserç±»å‹å®ä½“ç±»å¯¹è±¡
        User user = response.getEntity(User.class);
        // ä½¿ç”¨SerializationTypeTokenå°†å“åº”ä½“è½¬åŒ–ä¸ºå¸¦å¤æ‚æ³›å‹ç±»å‹çš„å®ä½“ç±»å¯¹è±¡
        Map<String, List<Object>> mapList = response.getEntity(new SerializationTypeToken<Map<String, List<Object>>>() {
        });
    }
}
```

