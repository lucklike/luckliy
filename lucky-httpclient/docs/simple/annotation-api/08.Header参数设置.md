## ğŸ¤” Headerå‚æ•°è®¾ç½®

---

### #ä½¿ç”¨`@HeaderParam`æ³¨è§£æ¥è®¾ç½®è¯·æ±‚å¤´

é»˜è®¤æƒ…å†µä½¿ç”¨çš„æ˜¯`addHeader()`æ–¹æ³•æ¥æ·»åŠ è¯·æ±‚å¤´ï¼Œå¦‚æœéœ€è¦ä½¿ç”¨`setHeader()`æ–¹æ³•æ¥è®¾ç½®è¯·æ±‚å¤´ï¼Œåˆ™éœ€è¦åœ¨`key`å‰åŠ ä¸Š`[SET]`å‰ç¼€

```java
/*
    addHeader("token-12345", "KEY-1111")
    
    -->
    
    GET http://localhost:8080/header
    User-Agent: Lucky-HttpClient/3.0.0 (Java/1.8.0_301)
    X-TOKEN: token-12345
    X-KEY: KEY-1111
    
 */
@Get("http://localhost:8080/header")
String addHeader(@HeaderParam("X-TOKEN") String token, @HeaderParam("X-KEY") String key);


/*
    ä½¿ç”¨setHeader()æ–¹æ³•è®¾ç½®è¯·æ±‚å¤´User-Agent
    setHeader("Lucky-Dev", "KEY-1111")
    
    -->
    
    GET http://localhost:8080/header
    User-Agent: Lucky-Dev
    X-KEY: KEY-1111
    
 */
@Get("http://localhost:8080/header")
String setHeader(@HeaderParam("[SET]User-Agent") String userAgent, @HeaderParam("X-KEY") String key);

// å¯ä»¥ä½¿ç”¨Mapæ¥æ‰¹é‡æ·»åŠ Headerå‚æ•°  
@Get("http://localhost:8080/header")
String mapHeader(@HeaderParam Map<String, Object> mapHeader);


// å½“ç„¶ï¼Œå¯ä»¥ä½¿ç”¨å¯¹è±¡æ¥æ‰¹é‡æ·»åŠ Headerå‚æ•°    
@Get("http://localhost:8080/header")
String mapHeader(@HeaderParam HeaderEntity objectHeader);

```

---

### #ä½¿ç”¨`@StaticHeader`æ³¨è§£æ¥è®¾ç½®è¯·æ±‚å¤´
`@StaticHeader`æ³¨è§£ä¸€èˆ¬ç”¨äºé…ç½®ä¸€äº›å›ºå®šçš„Headerå‚æ•°ï¼Œæ”¯æŒ`SpEL`è¡¨è¾¾å¼

1. **ç®€å•ä½¿ç”¨**
```java
@StaticHeader({
    "X-TOKEN: #{token}",           // ä½¿ç”¨å‚æ•°åçš„æ–¹å¼å–å‚æ•°åˆ—è¡¨ä¸­çš„å€¼
    "X-KEY: #{p1}",                // ä½¿ç”¨ç´¢å¼•çš„æ–¹å¼å–å‚æ•°åˆ—è¡¨ä¸­çš„å€¼
    "[SET]User-Agent: Lucky-Dev",  // å›ºå®šè¯·æ±‚å¤´
    "X-TIME: #{#time()}",          // æ‰§è¡ŒSpELå‡½æ•°
    "API-KEY: ${local.api.apiKey}" // å–ç¯å¢ƒå˜é‡ä¸­çš„é…ç½®
})
@Get("http://localhost:8080/header")
String addHeader(String token, String key);

```

2. **ä½¿ç”¨`@StaticHeader`æ³¨è§£çš„`æ¡ä»¶è¡¨è¾¾å¼`æ¥å®Œæˆç‰¹å®šæ¡ä»¶ä¸‹çš„Headerå‚æ•°è®¾ç½®**

- `condition`å±æ€§æ¥æ§åˆ¶`ä¸€æ‰¹Header`å‚æ•°çš„è®¾ä¸å¦

```java
/*
    1. TIMEå±æ€§ä¼šè¢«æ— æ¡ä»¶çš„åŠ å…¥åˆ°Headerå‚æ•°ä¸­
    2. åªæœ‰å½“`condition`å±æ€§ç½®é¡¶çš„æ¡ä»¶è¡¨è¾¾å¼`#{userInfo != null}` æˆç«‹æ—¶
        X-IDã€X-NAMEã€X-AGEæ‰ä¼šè¢«è®¾ç½®åˆ°Headerå‚æ•°ä¸­
 */
@StaticHeader({
    "TIME: #{#time}"    
})
@StaticHeader(
    condition = "#{userInfo != null}",
    value = {
        "X-ID: #{userInfo.id}",
        "X-NAME: #{userInfo.userName}",
        "X-AGE: #{userInfo.age}",
    }   
)
@Get("/getOne)
User getUser(User userInfo);
```

- ä½¿ç”¨`@if`è¡¨è¾¾å¼æ¥æ§åˆ¶å•ä¸ªHeaderå‚æ•°
> è¯­æ³•ä¸ºï¼š`@if(expression): key=value`

```java
/*
    å½“#{#nonNull(userInfo?.id)}è¡¨è¾¾å¼ç»“æœä¸ºtrueæ—¶ï¼ŒX-ID=#{userInfo.id} æ‰ä¼šè¢«è®¾ç½®ä¸ºHeaderå‚æ•°
 */
@StaticHeader({
    "TIME: #{#time()}",
    "@if(#{#nonNull(userInfo?.id)}): X-ID: #{userInfo.id}",    
})
@Get("/getOne)
User getUser(User userInfo);
```