## 🧐 异步模型
`lucky`中支持两种异步模型：`Java线程模型`和`Kotlin协程模型`

---
- Java线程模型：并发操作使用Java提供的线程池来实现（默认使用）
- Kotlin协程模型：并发操作使用Kotlin提供的协议来实现

### # 开启全局Kotlin协议模型

1. 需要引入Kotlin协程相关的依赖：

```xml
    <dependency>
        <groupId>org.jetbrains.kotlin</groupId>
        <artifactId>kotlin-stdlib</artifactId>
        <version>1.9.23</version>
    </dependency>

    <dependency>
        <groupId>org.jetbrains.kotlinx</groupId>
        <artifactId>kotlinx-coroutines-core</artifactId>
        <version>1.8.0</version>
    </dependency>
```

2. 将全局异步模型设置为Kotlin协程模型

- 原生java环境

```java
static {
    HttpClientProxyObjectFactory factory = new HttpClientProxyObjectFactory();
    //-------其他配置忽略-----------------
    // 将异步模型设置为Kotlin协程模型
    factory.setAsyncModel(Model.KOTLIN_COROUTINE);
    // 控制最大并发数为100
    factory.setDefaultExecutorConcurrency(100);
}
```

- springboot环境

```yaml
lucky:
  http-client:
    # 将异步模型设置为Kotlin协程模型
    async-model: kotlin_coroutine
    # 控制最大并发数为100
    default-executor-concurrency: 100
```
