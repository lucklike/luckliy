## âš™ï¸ å®‰è£…

---

###  ğŸ¥• å•ç‹¬ä½¿ç”¨

ğŸª¶ Maven
```xml
<dependency>
    <groupId>io.github.lucklike</groupId>
    <artifactId>lucky-httpclient</artifactId>
    <version>3.0.1</version>
</dependency>


<!-- æ¨èåŠ ä¸Šæ­¤æ’ä»¶ï¼Œå¯ä»¥æ–¹ä¾¿å‚æ•°é…ç½®-->
<!-- è®¾ç½®ç¼–è¯‘ç‰ˆæœ¬ä¸º1.8 ï¼Œ æ·»åŠ ç¼–è¯‘å‚æ•°-parameters -->
<plugin>
<groupId>org.apache.maven.plugins</groupId>
<artifactId>maven-compiler-plugin</artifactId>
<configuration>
    <source>1.8</source>
    <target>1.8</target>
    <encoding>UTF-8</encoding>
    <parameters>true</parameters>
</configuration>
<version>3.8.1</version>
</plugin>
```

ğŸ˜ Gradle

```groovy
implementation group: 'io.github.lucklike', name: 'lucky-httpclient', version: '3.0.1'
```

1. å®šä¹‰HTTPæ¥å£

```java
public interface BaiduApi {

    @HttpRequest(url = "http://www.baidu.com", method = RequestMethod.GET)
    String index();

    // ç®€åŒ–å†™æ³•
    @Get("http://www.baidu.com")
    String index2();
}
```
2.è·å–ä»£ç†å¯¹è±¡å¹¶ä½¿ç”¨

```java
public class Main {

    public static void main(String[] args) {
        
        // æ„é€ ä»£ç†å¯¹è±¡å·¥å‚ï¼Œä½¿ç”¨ä»£ç†å¯¹è±¡å·¥å‚è·å–HTTPæ¥å£ä»£ç†å¯¹è±¡
        HttpClientProxyObjectFactory proxyObjectFactory = new HttpClientProxyObjectFactory();
        BaiduApi baiduApi = proxyObjectFactory.getProxyObject(BaiduApi.class);

        // è°ƒç”¨HTTPæ–¹æ³•è·å–ç™¾åº¦é¦–é¡µ
        String index1 = baiduApi.index();

        // è°ƒç”¨HTTPæ–¹æ³•è·å–ç™¾åº¦é¦–é¡µ
        String index1 = baiduApi.index2();
    }
}

```

---

###  ğŸƒ ä¸SpringBootè¿›è¡Œæ•´åˆ

ğŸª¶ Maven
```xml
<dependency>
    <groupId>io.github.lucklike</groupId>
    <artifactId>lucky-httpclient-spring-boot-starter</artifactId>
    <version>3.0.0</version>
</dependency>

<!-- æ¨èåŠ ä¸Šæ­¤æ’ä»¶ï¼Œå¯ä»¥æ–¹ä¾¿å‚æ•°é…ç½®-->
<!-- è®¾ç½®ç¼–è¯‘ç‰ˆæœ¬ä¸º1.8 ï¼Œ æ·»åŠ ç¼–è¯‘å‚æ•°-parameters -->
<plugin>
<groupId>org.apache.maven.plugins</groupId>
<artifactId>maven-compiler-plugin</artifactId>
<configuration>
    <source>1.8</source>
    <target>1.8</target>
    <encoding>UTF-8</encoding>
    <parameters>true</parameters>
</configuration>
<version>3.8.1</version>
</plugin>
```

ğŸ˜ Gradle
```groovy
implementation group: 'io.github.lucklike', name: 'lucky-httpclient-spring-boot-starter', version: '3.0.0'
```

1. å¯åŠ¨ç±»ä¸ŠåŠ ä¸Š`@EnableLuckyHttpClient`æ³¨è§£å¼€å¯åŠŸèƒ½
```java
@EnableLuckyHttpClient
@SpringBootApplication
public class LuckyClientApplication {

    public static void main(String[] args) {
        SpringApplication.run(LuckyClientApplication.class, args);
    }

}
```

2. å®šä¹‰ä½¿ç”¨`@HttpClientComponent`æ³¨è§£æ¥å®šä¹‰ä¸€ä¸ªHTTPæ¥å£
```java

@HttpClientComponent
public interface BaiduApi {

    @HttpRequest(url = "http://www.baidu.com", method = RequestMethod.GET)
    String index();

    // ç®€åŒ–å†™æ³•
    @Get("http://www.baidu.com")
    String index2();
}
```

3. ä½¿ç”¨`@Resource`æˆ–è€…`@Autowired`ç­‰æ³¨è§£æ³¨å…¥åˆ°Beanä¸­ä½¿ç”¨

```java

@RestController
@RequestMapping("baidu")
public class BaiduController {

    @Autowired
    private BaiduApi baiduApi;

    @RequestMapping("index")
    public String baiduIndex() {
        return baiduApi.index2();
    }

}

```

4. ä½¿ç”¨`@HttpReference`æ³¨è§£å¯¼å…¥ç¬¬ä¸‰æ–¹åŒ…ä¸­çš„HTTPæ¥å£ç»„ä»¶ï¼Œä»¥lucky-httpclientåŒ…ä¸­æä¾›çš„åˆ†ç‰‡ä¸‹è½½å·¥å…·[RangeDownloadApi.java](../../../src/main/java/com/luckyframework/httpclient/generalapi/binary/RangeDownloadApi.java)ä¸ºä¾‹

```java

@RestController
@RequestMapping("binary")
public class FileDownloadController {

    @HttpReference
    private RangeDownloadApi rangeDownloadApi;

    @RequestMapping("index")
    public void baiduIndex(String url, HttpServletResponse response) {
        response.setHeader("Content-disposition", "attachment;filename=rareword-import-model.xlsx");
        response.setContentType("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet");
        File excelFile = rangeDownloadApi.downloadRetryIfFail(url);
        OutputStream out = response.getOutputStream();
        FileCopyUtils.copy(new FileInputStream(excelFile), out);
    }

}
```